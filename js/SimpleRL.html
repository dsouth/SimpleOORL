<!doctype html>
<title>SimpleRL - JavaScript</title>
<meta charset="utf-8" />
<style>
  body {
    font-family: monospace;
  }
</style>
<pre id="viewport"></pre>
<script>
  var viewport = document.getElementById( "viewport" );

  var map = [
    '####  ####', 
    '#  ####  #', 
    '#        #', 
    '##      ##', 
    ' #      # ', 
    ' #      # ', 
    '##      ##', 
    '#        #', 
    '#  ####  #', 
    '####  ####'   
  ];
  
  var position = { x: 2, y: 2 };

  var tick = function( e ) {
    setTile( ' ' );

    switch( e.keyCode ) {
      case 37:
        movePlayer( position.x - 1, position.y );
        break;
      case 38:
        movePlayer( position.x, position.y - 1 );
        break;
      case 39:
        movePlayer( position.x + 1, position.y );
        break;
      case 40:
        movePlayer( position.x, position.y + 1 );
        break;
    }

    setTile( '@' );

    draw();      
  }
  
  var draw = function() {
    var tiles = '';
    
    map.forEach( function( row ) {
      tiles += row + "<br />";
    });
    
    viewport.innerHTML = tiles;
  }
  
  var setTile = function( tile ) {
    map[ position.y ] = map[ position.y ].substr( 0, position.x ) + tile + map[ position.y ].substr( position.x + 1 );
  }
  
  var movePlayer = function( newX, newY ) {
    if( map[ newY ][ newX ] != ' ' ) return;
    
    position.x = newX;
    position.y = newY;      
  }
  
  document.addEventListener( "keyup", tick, 0 ); 
  
  tick( { keyCode: null } );
</script>